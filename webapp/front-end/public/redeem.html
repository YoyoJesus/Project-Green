<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/leaf-solid.ico" />
    <script src="https://kit.fontawesome.com/6f82a4b872.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    <style>
      img 
      {
      width: 100%;
      }
      
      li.nav-item
      {
      height: 45px;
      }
      
      .jumbotron
      {
      margin-bottom: 0; 
      background-color: #18800d; 
      color: #b6ebb0;
      border-radius: 0;
      }
      
      </style>
    <title>Project Green</title>
  </head>
  <body>
    <h1 class = "jumbotron text-center display-2 margin">Project Green</h1>

<!--Navigation Bar--> 
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav" style = "line-height: inherit;">
    <ul class="navbar-nav">
      <li class="nav-item">
	  <!--Home Icon-->
        <a class="nav-link" href="index.html"><p>Home</p></a>
      </li>
      <li class="nav-item">
	  <!--Tables/Forms Icon -->
        <a class="nav-link" href="redeem.html"><p>Redeem</p></a>
      </li>
      <li class="nav-item">
	  <!--Navigation Bar Icon --> 
        <a class="nav-link" href="account.html"><p>Account</p></a>
      </li>
      <li class="nav-item">
        <!--Navigation Bar Icon --> 
            <a class="nav-link" href="machine.html"><p>Machine Learning</p></a>
          </li>
    </ul>
  </div>
</nav>

<div style="text-align: center;">
  <h1>Account Balance: <span id="variableValue"></span></h1>
</div>

<div class="container">
  <br>
  <!--Table with header text-->
  <h4 class="text-center display-4">Redeem Your Points</h4>
  <br>
  <table class="table">
    <thead class="thead-light">
      <tr>
        <th scope="col"></th>
        <th scope="col"></th>
        <th scope="col">Prize</th>
        <th scope="col">Overview</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th scope="row">1st Option</th>
        <td><button onclick="decrementValue(1, 20)">Redeem</button></td>
        <td>Virtual Rewards (20 points)</td>
        <td>Users can redeem 20 points for virtual rewards such as badges, trophies, or special avatars to personalize their profiles or showcase their achievements within the website's community. This lower-point reward encourages users to engage with the website and build their online presence.</td>
      </tr>
      <tr>
        <th scope="row">2nd Option</th>
        <td><button onclick="decrementValue(2, 50)">Redeem</button></td>
        <td>Exclusive Discounts (50 points)</td>
        <td>Users can unlock exclusive discounts by redeeming 50 points. These discounts may include 20% off premium memberships, access to limited-time promotions, or special pricing on select items. The 50-point threshold ensures that users have actively engaged with the website to earn this reward.</td>
      </tr>
      <tr>
        <th scope="row">3rd Option</th>
        <td><button onclick="decrementValue(3, 100)">Redeem</button></td>
        <td>Gift Cards (100 points)</td>
        <td>For 100 points, users can claim a $5 gift card to popular retailers like Amazon, Starbucks, or Target. This higher-point reward provides users with a tangible benefit for their continued participation and loyalty to the website.</td>
      </tr>
    </tbody>
  </table>
</div>
<br>

<footer id="sticky-footer" class="flex-shrink-0 py-4 bg-dark text-white-50">
  <div class="container text-center">
    <small>Project Green | KHE 2024</small>
  </div>
</footer>

<!-- bootstrap js scripts-->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<script>
  // Function to decrement the value and update the server
  const decrementValue = async (row, amount) => {
  try {
    const response = await fetch('http://localhost:3001/decrementValue', {
      method: 'POST',
      headers: {
        'Content-Type': 'text/plain',
      },
      body: amount.toString(),
    });

    if (!response.ok) {
      console.error('Error decrementing value:', response.statusText);
      return; // Exit early if there's an error
    }

    // If the response is okay, don't update the button text
  } catch (error) {
    console.error('Error decrementing value:', error);
  }
};

  // Function to fetch the variable value from the server
  const fetchVariable = async () => {
    try {
      const response = await fetch('http://localhost:3001/variable');
      const data = await response.text();
      document.getElementById('variableValue').textContent = data;
    } catch (error) {
      console.error('Error fetching variable:', error);
    }
  };

  // Fetch the variable value when the page loads
  window.onload = fetchVariable;

  // Optionally, you can fetch the variable value periodically
  setInterval(fetchVariable, 5000);
</script>
  </body>
</html>
